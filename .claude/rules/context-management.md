---
paths: "**/*"
---

# コンテキスト管理ルール（必須）

## 基本原則

**コンテキストは牛乳のようなもの - 新鮮で濃縮された状態が最良。**

## 必須ルール

| ルール | 内容 |
|--------|------|
| **新鮮なコンテキスト** | 新しいトピックには新しい会話を開始 |
| **HANDOFF.md作成** | 長時間作業時は進捗をHANDOFF.mdに保存 |
| **プロアクティブな/clear** | コンテキストが汚染される前に手動クリア |
| **自動圧縮を無効化** | `/config`で自動圧縮を無効化し手動管理 |

## コンテキスト管理戦略

### 1. 会話の分離

```
トピックA → 新しい会話
トピックB → 新しい会話
トピックC → 新しい会話
```

### 2. HANDOFF.mdパターン

```markdown
# HANDOFF.md

## 完了したタスク
- [x] タスク1
- [x] タスク2

## 進行中のタスク
- [ ] タスク3

## 次のステップ
1. ステップ1
2. ステップ2

## 重要なコンテキスト
- 決定事項1
- 決定事項2
```

### 3. 会話履歴の検索

会話ファイルは `~/.claude/projects/` に保存。
grepやClaude自身に検索させて過去の議論を参照可能。

## 禁止事項

- 1つの会話で複数の無関係なトピックを扱う
- コンテキストが劣化するまで同じ会話を続ける
- HANDOFF.mdなしで長時間作業を中断

## 参照

- [awesome-claude-code](https://github.com/hesreallyhim/awesome-claude-code)
- [ykdojo/claude-code-tips](https://github.com/ykdojo/claude-code-tips)


## コンテキスト圧縮後の必須確認（絶対遵守）

> ⚠️ **圧縮後、以下を必ず確認・維持すること**

| 確認項目 | 内容 |
|----------|------|
| **🔴 Gemini協力体制** | 壁打ち・調査でGeminiを活用（中断禁止） |
| **ファイル書き込み** | JSスクリプト経由（Write/Edit禁止） |
| **日本語回答** | 必ず日本語で回答 |
| **確認なし実行** | Yes/No確認せずに完了まで実行 |

### Gemini協力チェック

圧縮直後に自問：
- [ ] Geminiとの協力体制を維持しているか？
- [ ] 壁打ちルールを覚えているか？
- [ ] 次のタスクでGeminiに相談するか？
